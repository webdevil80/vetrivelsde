stages:
  - sync

sync_to_github:
  stage: sync
  before_script:
    - git config --global user.name "GitLab CI"
    - git config --global user.email "ci@gitlab.com"
    - git remote add github "$GITHUB_REPO"
  script:
    - git fetch origin main
    - git checkout main
    - git pull origin main
    - git push github main --force
    - git push github --tags --force
  only:
    - main
